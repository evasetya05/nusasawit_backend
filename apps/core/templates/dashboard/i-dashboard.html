{% extends 'base.html' %}
{% load static %}

{% block extrastyle %}
<!-- Tailwind CDN -->
<script src="https://cdn.tailwindcss.com"></script>
<style>
  /* Minor custom styles */
  .glass { background: rgba(255,255,255,0.6); backdrop-filter: blur(6px); }
  .hero-bg { background-image: linear-gradient(90deg, rgba(16,185,129,0.06), rgba(6,95,70,0.04)); }
</style>
{% endblock %}

{% block body %}
<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Nusasawit â€” Mendukung Petani Kelapa Sawit</title>
  <meta name="description" content="Nusasawit: platform untuk membantu petani sawit dengan marketplace, harga TBS, pelatihan, sertifikasi, dan konsultasi." />
</head>
<body class="antialiased text-slate-800 bg-gradient-to-b from-green-50 to-white min-h-screen">
  <header class="sticky top-0 z-40 bg-white/80 backdrop-blur-sm border-b">
    <div class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between">
      <a href="#" class="flex items-center gap-3">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-green-600" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C8.13 2 5 5.13 5 9c0 4.5 5.5 11 7 13 1.5-2 7-8.5 7-13 0-3.87-3.13-7-7-7z"/></svg>
        <span class="font-semibold text-lg">Nusasawit</span>
      </a>
      <nav class="hidden md:flex gap-6 items-center text-sm">
        <a href="#marketplace" class="hover:text-green-700">Marketplace</a>
        <a href="#harga-tbs" class="hover:text-green-700">Harga TBS</a>
        <a href="#pelatihan" class="hover:text-green-700">Pelatihan</a>
        <a href="#sertifikasi" class="hover:text-green-700">Sertifikasi</a>
        <a href="{% url 'login' %}" class="text-white bg-green-600 px-3 py-1 rounded-md shadow">Login</a>
      </nav>
      <div class="md:hidden">
        <button id="menuBtn" class="p-2 rounded-md border">â˜°</button>
      </div>
    </div>
    <div id="mobileMenu" class="hidden md:hidden bg-white/90 border-t">
      <div class="px-4 py-3 flex flex-col gap-2">
        <a href="#marketplace">Marketplace</a>
        <a href="#harga-tbs">Harga TBS</a>
        <a href="#pelatihan">Pelatihan</a>
        <a href="#sertifikasi">Sertifikasi</a>
        <a href="{% url 'login' %}" class="text-white bg-green-600 px-3 py-1 rounded-md text-center">Login</a>
      </div>
    </div>
  </header>

  <!-- Debug User Role Information -->
  {% if debug_user %}
  <div class="max-w-6xl mx-auto px-4 py-4">
    <div class="bg-yellow-50 border border-yellow-200 rounded-md p-4">
      <h4 class="font-semibold text-yellow-800 mb-2">Debug User Role Information:</h4>
      <ul class="text-sm text-yellow-700 space-y-1">
        <li><strong>Username:</strong> {{ debug_user.username }}</li>
        <li><strong>is_owner:</strong> {{ debug_is_owner }}</li>
        <li><strong>is_employee:</strong> {{ debug_is_employee }}</li>
        <li><strong>is_supervisor:</strong> {{ debug_is_supervisor }}</li>
        {% if debug_person %}
          <li><strong>Person Name:</strong> {{ debug_person.name }}</li>
          <li><strong>Has Subordinates:</strong> {{ debug_person.subordinates.exists }}</li>
          <li><strong>Subordinate Count:</strong> {{ debug_person.subordinates.count }}</li>
        {% endif %}
      </ul>
    </div>
  </div>
  {% endif %}

  <main class="max-w-6xl mx-auto px-4 py-8">
    <section class="hero-bg rounded-2xl p-8 md:p-12 shadow-sm">
      <div class="md:flex md:gap-8 items-center">
        <div class="md:w-1/2">
          <h1 class="text-3xl md:text-4xl font-extrabold leading-tight">Nusasawit â€” Mendukung Petani Kelapa Sawit</h1>
          <p class="mt-4 text-slate-700">Platform lokal untuk jual-beli hasil panen, pantauan harga Tandan Buah Segar (TBS), akses pelatihan & sertifikasi, serta konsultasi teknis agar petani menghasilkan panen lebih baik dan berkelanjutan.</p>

          <div class="mt-6 flex gap-3">
            <a href="#marketplace" class="inline-block bg-green-600 text-white px-4 py-2 rounded-md shadow">Lihat Marketplace</a>
            <a href="#pelatihan" class="inline-block border px-4 py-2 rounded-md">Daftar Pelatihan</a>
          </div>

          <ul class="mt-6 grid grid-cols-2 gap-3 sm:grid-cols-3 text-sm text-slate-700">
            <li>ğŸ“¦ Jual & beli hasil tani</li>
            <li>ğŸ“ˆ Pantauan harga TBS</li>
            <li>ğŸ“š Pelatihan & modul</li>
            <li>ğŸ›¡ï¸ Bantu urus sertifikasi</li>
            <li>ğŸ—ºï¸ Pemetaan lahan & rawan banjir</li>
            <li>ğŸ“ Konsultasi lapangan</li>
          </ul>
        </div>

        <div class="md:w-1/2 mt-6 md:mt-0">
          <div class="rounded-xl overflow-hidden shadow-lg">
            <img src="https://images.unsplash.com/photo-1501004318641-b39e6451bec6?auto=format&fit=crop&w=1400&q=60" alt="Petani sawit" class="w-full h-56 object-cover">
          </div>
        </div>
      </div>
    </section>

    <section id="marketplace" class="mt-10">
      <h2 class="text-2xl font-semibold">Marketplace Lokal</h2>
      <p class="mt-2 text-slate-600">Jual hasil panen langsung ke pembeli lokal â€” tanpa perantara berlebihan. Tampilkan foto, berat, lokasi pickup, dan harga.</p>

      <div class="mt-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
        <!-- Example product cards -->
        <article class="border rounded-lg p-4 glass">
          <img class="w-full h-36 object-cover rounded-md" src="https://images.unsplash.com/photo-1582515073490-399813e82791?auto=format&fit=crop&w=800&q=60" alt="TBS sample">
          <h3 class="mt-3 font-medium">Tandan Buah Segar - 1000 kg</h3>
          <p class="text-sm text-slate-600 mt-1">Lokasi: Pekanbaru â€¢ Kualitas: Grade A</p>
          <div class="mt-3 flex items-center justify-between">
            <div class="text-lg font-semibold">Rp 1.450.000</div>
            <a href="#" class="text-sm px-3 py-1 border rounded">Lihat</a>
          </div>
        </article>

        <article class="border rounded-lg p-4 glass">
          <img class="w-full h-36 object-cover rounded-md" src="https://images.unsplash.com/photo-1506806732259-39c2d0268443?auto=format&fit=crop&w=800&q=60" alt="CPO sample">
          <h3 class="mt-3 font-medium">CPO - Minyak Sawit</h3>
          <p class="text-sm text-slate-600 mt-1">Lokasi: Lampung â€¢ Packing: Drum 200L</p>
          <div class="mt-3 flex items-center justify-between">
            <div class="text-lg font-semibold">Rp 25.000 / kg</div>
            <a href="#" class="text-sm px-3 py-1 border rounded">Pesan</a>
          </div>
        </article>

        <article class="border rounded-lg p-4 glass">
          <img class="w-full h-36 object-cover rounded-md" src="https://images.unsplash.com/photo-1548199973-03cce0bbc87b?auto=format&fit=crop&w=800&q=60" alt="Alat pertanian">
          <h3 class="mt-3 font-medium">Alat Pemanen Portable</h3>
          <p class="text-sm text-slate-600 mt-1">Stok: 12 â€¢ Garansi 6 bulan</p>
          <div class="mt-3 flex items-center justify-between">
            <div class="text-lg font-semibold">Rp 1.100.000</div>
            <a href="#" class="text-sm px-3 py-1 border rounded">Beli</a>
          </div>
        </article>
      </div>

      <div class="mt-4 text-right">
        <a href="#" class="text-sm underline">Lihat semua produk â†’</a>
      </div>
    </section>

    <section id="harga-tbs" class="mt-10 grid md:grid-cols-2 gap-6">
      <div class="border rounded-lg p-4">
        <h3 class="text-xl font-semibold">Pantauan Harga TBS</h3>
        <p class="mt-2 text-slate-600">Harga harian/weekly TBS dari pasar terdekat. (Data dapat diintegrasikan lewat API atau input manual oleh admin.)</p>

        <table class="w-full mt-4 text-sm">
          <thead class="text-left text-slate-600">
            <tr><th>Lokasi</th><th>Harga (Rp/kg)</th><th>Tanggal</th></tr>
          </thead>
          <tbody class="mt-2">
            <tr class="border-t"><td>Pekanbaru</td><td class="font-medium">1.450</td><td>2025-12-01</td></tr>
            <tr class="border-t"><td>Lampung</td><td class="font-medium">1.420</td><td>2025-12-01</td></tr>
            <tr class="border-t"><td>Jambi</td><td class="font-medium">1.430</td><td>2025-12-01</td></tr>
          </tbody>
        </table>

        <p class="mt-3 text-xs text-slate-500">*Perbarui secara otomatis lewat integrasi API pasar atau input manual dari petugas lokal.</p>
      </div>

      <div class="border rounded-lg p-4">
        <h3 class="text-xl font-semibold">Alat Bantu untuk Petani</h3>
        <ul class="mt-3 list-disc list-inside text-slate-700">
          <li>Checklist panen & mutu</li>
          <li>Panduan sederhana K3 pertanian</li>
          <li>Tutorial pemupukan & pengendalian hama</li>
          <li>Form permohonan konsultasi lapangan</li>
        </ul>

        <form class="mt-4 grid gap-2">
          <input type="text" placeholder="Nama" class="border rounded px-3 py-2" />
          <input type="tel" placeholder="No. HP (contoh: +628)" class="border rounded px-3 py-2" />
          <textarea placeholder="Sampaikan singkat masalah Anda" class="border rounded px-3 py-2"></textarea>
          <div class="flex gap-2">
            <button type="button" class="bg-green-600 text-white px-4 py-2 rounded">Kirim Konsultasi</button>
            <button type="button" class="border px-4 py-2 rounded">Reset</button>
          </div>
        </form>
      </div>
    </section>

    <section id="pelatihan" class="mt-10">
      <h2 class="text-2xl font-semibold">Pelatihan & Modul</h2>
      <p class="mt-2 text-slate-600">Kurikulum singkat untuk meningkatkan produktivitas dan praktik berkelanjutan.</p>

      <div class="mt-4 grid md:grid-cols-3 gap-4">
        <div class="border rounded-lg p-4 glass">
          <h3 class="font-medium">Manajemen Panen</h3>
          <p class="text-sm mt-2">Teknik pemanenan, sorting, & penyimpanan sementara.</p>
          <div class="mt-3 text-sm"><a href="#">Daftar â†’</a></div>
        </div>
        <div class="border rounded-lg p-4 glass">
          <h3 class="font-medium">Pengendalian Hama</h3>
          <p class="text-sm mt-2">Identifikasi hama umum dan penanganan aman.</p>
          <div class="mt-3 text-sm"><a href="#">Daftar â†’</a></div>
        </div>
        <div class="border rounded-lg p-4 glass">
          <h3 class="font-medium">Persiapan Sertifikasi</h3>
          <p class="text-sm mt-2">Langkah awal untuk sertifikasi (ISPO, K3, Halal).</p>
          <div class="mt-3 text-sm"><a href="#">Daftar â†’</a></div>
        </div>
      </div>
    </section>

    <section id="sertifikasi" class="mt-10">
      <h2 class="text-2xl font-semibold">Sertifikasi yang Dibantu</h2>
      <p class="mt-2 text-slate-600">Kami membantu proses dan persyaratan sertifikasi umum untuk pasar yang layak jual.</p>

      <ul class="mt-4 grid sm:grid-cols-2 gap-3 text-slate-700">
        <li class="border rounded p-3">â€¢ ISPO (Indonesian Sustainable Palm Oil)</li>
        <li class="border rounded p-3">â€¢ K3 Pertanian (Keselamatan & Kesehatan Kerja)</li>
        <li class="border rounded p-3">â€¢ Halal (untuk pasar tertentu)</li>
        <li class="border rounded p-3">â€¢ GAP (Good Agricultural Practices)</li>
      </ul>
    </section>

    <section id="kontak" class="mt-10 mb-12 grid md:grid-cols-2 gap-6">
      <div class="border rounded-lg p-4">
        <h3 class="text-xl font-semibold">Kontak & Dukungan</h3>
        <p class="mt-2 text-slate-600">Hubungi tim lapangan kami untuk kunjungan atau bimbingan.</p>

        <dl class="mt-4 text-sm text-slate-700">
          <dt class="font-medium">Email</dt>
          <dd>info@nusasawit.local</dd>
          <dt class="font-medium mt-3">Telp / WhatsApp</dt>
          <dd>+62 812-3456-7890</dd>
          <dt class="font-medium mt-3">Alamat kantor</dt>
          <dd>Jalan Sawit No. 10, Pekanbaru</dd>
        </dl>

        <div class="mt-4">
          <a class="inline-block bg-green-600 text-white px-4 py-2 rounded" href="#">Minta kunjungan lapangan</a>
        </div>
      </div>

      <div class="border rounded-lg p-4">
        <h3 class="text-xl font-semibold">Peta & Lokasi</h3>
        <p class="mt-2 text-slate-600">Tandai lokasi kebun Anda agar tim kami bisa melakukan penjadwalan kunjungan.
        </p>
        <div class="mt-4 rounded overflow-hidden h-64 bg-slate-100 flex items-center justify-center text-slate-400">Peta (integrasi leaflet/Google Maps)</div>
      </div>
    </section>
  </main>

  <footer class="border-t py-6">
    <div class="max-w-6xl mx-auto px-4 text-center text-sm text-slate-600">
      Â© 2025 Nusasawit Â· Built to support smallholder palm oil farmers â€¢ Version 0.1
    </div>
  </footer>

  <script>
    // mobile menu toggle
    const menuBtn = document.getElementById('menuBtn');
    const mobileMenu = document.getElementById('mobileMenu');
    menuBtn && menuBtn.addEventListener('click', () => {
      mobileMenu.classList.toggle('hidden');
    });

  function actionChatForDemo() {
    const phoneNumber = "+6285348178999";
    const message = encodeURIComponent("Halo, saya ingin konsultasi mengenai demo SDM Portabel.");
    const whatsappURL = `https://wa.me/${phoneNumber}?text=${message}`;
    window.open(whatsappURL, "_blank");
  }
  </script>

{% endblock %}
